"use strict";$(document).ready((function(){$.fn.extend({directory_ids:{allnet:"#allnet",filterby:"#filterby",orderby:"#orderby",searchby:"#searchby",startwith:"#startwith",country:"#country",statecity:"#statecity",city:"#city",keyword:"#keyword",directory_search:"#directory-search"},parseQuery:function(e){if(e){var t=e[0],n=e[1];return t&&t.length>0&&(t=t.replace(/\+/g," ")),n&&n.length>0&&(n=n.replace(/\+/g," ")),{key:decodeURIComponent(t),value:decodeURIComponent(n)}}},parseQueryString:function(){var e,t,n={},r={},s=location.search.substr(1).split("&");if(s)for(e=0;e<s.length;e++)if(void 0!==(t=$.fn.parseQuery(s[e].split("=")))&&void 0!==t.key)if("networkids"===t.key.toLowerCase())switch(t.value){case"1":r.wca=t.value;break;case"2":r.apln=t.value;break;case"3":r.cgln=t.value;break;case"4":r.igln=t.value;break;case"5":r.wcapn=t.value;break;case"6":r.aws=t.value;break;case"13":r.pla=t.value;break;case"15":r.wcarelo=t.value;break;case"16":r.pharma=t.value;break;case"18":r.tcla=t.value;break;case"22":r.dgla=t.value;break;case"31":r.pp=t.value;break;case"35":r.rm=t.value;break;case"38":r.vendor=t.value;break;case"41":r.win=t.value;break;case"61":r.lognet=t.value;break;case"98":r.gaa=t.value;break;case"97":r.lognet_vendors=t.value;break;case"103":r.wca_ecom=t.value;break;case"105":r.ecom=t.value;break;case"108":r.egln=t.value}else n[t.key]=t.value;return n.networkIds=r,n},getSelected:function(e,t){return e===t?' selected="selected"':""},isSelected:function(e,t){return e===t},getApi:function(e,t){return $.ajax({url:e,type:"GET",cache:!1,crossDomain:!0,headers:{"Access-Control-Allow-Origin":"*","WCA-Referer":t.wcareferer},beforeSend:function(e){e.setRequestHeader("Authorization","Basic "+t.basic),e.setRequestHeader("MY-XSRF-TOKEN",t.token)}})},onlyNumber:function(e){var t=window.event?e.keyCode:e.which;return 8===e.keyCode||13===e.keyCode||46===e.keyCode||(!(t<48||t>57)||(alert("Please input Number only"),!1))}}),$.fn._selector=function(e){return e=$.extend({},$.fn.directory.defaults,e),{enabled:function(){return e.self&&e.self.removeAttr("disabled"),this},disabled:function(){if(e.self)switch(e.self.type){case"input":e.self.prop("disabled",!0);break;default:e.self.attr("disabled","disabled")}return this},reset:function(){if(e.self){var t=e.defaultVal;e.self.find("option").remove().end(),e.self.append('<option value="'+t.value+'" '+t.selected+">"+t.text+"</option>"),this.disabled()}return this},add:function(t,n){return e.self&&e.self.append($("<option></option>").attr("value",t).text(n)),this},map:function(t,n){return t?$.each(t,(function(t,r){e.self&&($.fn.isSelected(n,r.Code)?e.self.append($("<option></option>").attr("value",r.Code).attr("selected","selected").text(r.Name)):e.self.append($("<option></option>").attr("value",r.Code).text(r.Name)))})):alert("Sorry, the system could not load counties, please try again."),this},mapPopup:function(t,n){return $.each(t,(function(t,r){e.self&&($.fn.isSelected(n,r.Name)?e.self.append($("<option></option>").attr("value",r.Name).attr("selected","selected").text(r.Name)):e.self.append($("<option></option>").attr("value",r.Name).text(r.Name)))})),"m"==e.au&&e.self.append('<option value="Request">Others - Click here to send request</option>'),this}}},$.fn.allnet=function(e){return(e=$.extend({},$.fn.directory.defaults,e)).self=this,{options:e,set:function(t){return e.self[0].checked=t,this},change:function(){return e.self.change(),this},checked:function(){return e.self[0].checked}}},$.fn.searchby=function(e){return(e=$.extend({},$.fn.directory.defaults,e)).self=this,e._selector=this._selector(e),{options:e,change:function(){return e.self.change(),this}}},$.fn.startwith=function(e){return(e=$.extend({},$.fn.directory.defaults,e)).self=this,e._selector=this._selector(e),{options:e,change:function(){return e.self.change(),this},load:function(){return $.fn.getApi(e.api+"/alphabets?isAuth=True",e).done((function(t){if(e._selector){var n=[];$.each(t,(function(e,t){n.push({Code:t,Name:t})})),e._selector.map(n).enabled()}})),this},enabled:function(){return e._selector.enabled(),this},reset:function(){return e.self.find("option").remove().end(),e._selector.disabled(),this},hide:function(){return e.self.hide(),this},show:function(){return e.self.show(),this},focus:function(){return e.self.focus(),this},val:function(){return e.self.val()}}},$.fn.country=function(e){return(e=$.extend({},$.fn.directory.defaults,e)).self=this,e.defaultVal=e.defaultVal||{selected:$.fn.getSelected(e.queries.country,""),text:"--- Country ---",value:""},e._selector=this._selector(e),{options:e,change:function(){return e.self.change(),this},load:function(){return $.fn.getApi(e.api+"/countries",e).done((function(t){e._selector&&(e._selector.reset().map(t,e.queries.country).enabled(),e.self.change())})),this},enabled:function(){return e._selector.enabled(),this},reset:function(){return e._selector.reset(),this},hide:function(){return e.self.hide(),this},show:function(){return e.self.show(),this},focus:function(){return e.self.focus(),this},val:function(){return e.self.val()}}},$.fn.statecity=function(e){return(e=$.extend({},$.fn.directory.defaults,e)).self=this,e.countryCode=e.countryCode||"US",e.defaultVal=e.defaultVal||{selected:$.fn.getSelected(e.queries.statecity,""),text:"All States",value:""},e._selector=this._selector(e),{options:e,change:function(){return e.self.change(),this},load:function(t){return e.countryCode=t,$.fn.getApi(e.api+"/states?countryCode="+e.countryCode,e).done((function(t){e._selector&&(e._selector.reset().map(t,e.queries.statecity).enabled(),e.self.change())})),this},enabled:function(){return e._selector.enabled(),this},reset:function(){return e._selector.reset(),this},hide:function(){return e.self.hide(),this},show:function(){return e.self.show(),this},focus:function(){return e.self.focus(),this},val:function(){return e.self.val()}}},$.fn.city=function(e){return(e=$.extend({},$.fn.directory.defaults,e)).self=this,e.countryCode=e.countryCode||"",e.stateCode=e.stateCode||"",e.defaultVal=e.defaultVal||{selected:$.fn.getSelected(e.queries.city,""),text:"All Cities",value:""},e._selector=this._selector(e),{options:e,change:function(){return e.self.change(),this},load:function(t,n){return e.countryCode=t,e.stateCode=n,$.fn.getApi(e.api+"/cities/search?countryCode="+e.countryCode+"&stateCode="+e.stateCode+"&city=",e).done((function(t){e._selector&&e._selector.reset().mapPopup(t,e.queries.city).enabled()})),this},enabled:function(){return e._selector.enabled(),this},reset:function(){return e._selector.reset(),this},hide:function(){return e.self.hide(),this},show:function(){return e.self.show(),this},focus:function(){return e.self.focus(),this},val:function(){return e.self.val()}}},$.fn.keyword=function(e){return(e=$.extend({},$.fn.directory.defaults,e)).self=this,{options:e,change:function(){return e.self.change(),this},bindKeypress:function(){return e.self.bind("keypress",$.fn.onlyNumber),this},unbindKeypress:function(){return e.self.unbind("keypress",$.fn.onlyNumber),this},hide:function(){return e.self.hide(),this},show:function(){return e.self.show(),this},focus:function(){return e.self.focus(),this},val:function(){return e.self.val()}}},$.fn.directory=function(e){return(e=$.extend({},$.fn.directory.defaults,e))._allnet=$("#allnet").allnet(e),e._filterby=$("#filterby"),e._searchby=$("#searchby").searchby(e),e._startwith=$("#startwith").startwith(e),e._country=$("#country").country(e),e._statecity=$("#statecity").statecity(e),e._city=$("#city").city(e),e._keyword=$("#keyword").keyword(e),e._startwith.hide(),e._country.hide(),e._statecity.hide(),e._city.hide(),this.on("change","#allnet",null,(function(e){for(var t,n=e.currentTarget,r=$("input[name='networkIds']"),s=0;s<r.length;s++)"win"!=(t=r[s]).id&&(t.checked=n.checked)})).on("change","input[name='networkIds']",null,(function(){for(var t,n=!0,r=$("input[name='networkIds']"),s=0;s<r.length;s++)if(!(t=r[s]).checked&&"win"!=t.id){n=!1;break}e._allnet.set(n)})).on("change","#orderby",null,(function(){})).on("change","#searchby",null,(function(){switch(e._keyword.unbindKeypress(),this.value){case"CountryCode":e._filterby.show(),e._startwith.reset().hide(),e._country.show().focus().load(),e._statecity.hide(),e._city.hide(),e._keyword.show();break;case"CompanyName":e._country.reset().hide(),e._statecity.reset().hide(),e._city.reset().hide(),e._keyword.show().focus();break;case"ID":e._startwith.reset().hide(),e._country.reset().hide(),e._statecity.reset().hide(),e._city.reset().hide(),e._keyword.show().focus().bindKeypress();break;default:e._startwith.reset().hide(),e._country.reset().hide(),e._statecity.reset().hide(),e._city.reset().hide(),e._keyword.show()}})).on("change","#startwith",null,(function(){e._keyword.focus()})).on("change","#country",null,(function(){switch(this.value){case"US":case"GB":e._city.reset().show(),e._statecity.load(this.value).show();break;default:var t=e._country.val();e._statecity.reset().hide(),e._city.load(t,"").show()}})).on("change","#statecity",null,(function(){var t,n=this.value||"";switch(n){case"":e._city.reset().show().enabled();break;default:t=e._statecity.options.countryCode,e._city.reset().show(),e._city.load(t,n).show()}})).on("change","#city",null,(function(){switch(this.value||""){case"Request":$("select[name=city]").val(""),$("#requestModal #showiframe iframe").attr("src",""),$("#requestModal #showiframe").html("<iframe src='/Directory/RequestLocation' style='width:100%;height:100%;min-height:550px;border:0'></iframe>"),$("#requestModal").modal("show");break;default:e._keyword.focus()}})).on("submit","#directory-search",null,(function(t){if(t.preventDefault(),""===$("select[name=orderby]").val())return alert("Please select Order By"),!1;if(""===$("select[name=searchby]").val())return alert("Please select Search By"),!1;if(!function(){var e,t,n=$("select[name='networkIds']"),r=!1;if(n)for(e=0;e<n.length&&(t=n[e],$("#"+t.id+" option:selected").each((function(){r=!0})),!r);e++);return r}())return alert("Please select Networks"),!1;switch($("select[name=searchby]").val()){case"CountryCode":if(""===$("select[name=country]").val())return alert("Please select Country"),!1;break;case"CompanyName":if(""===$("input[name=keyword]").val())return alert("Please fill Company Name"),e._keyword.focus(),!1;break;case"ID":if(""===$("input[name=keyword]").val())return alert("Please fill ID Number"),e._keyword.focus(),!1}$("#btn_search").attr("disabled","disabled"),this.submit()})),{ready:function(){if(e._searchby.change(),"True"===e.isvalid&&e.submitted){var t=420,n=$(e.resultdiv);n&&n.offset()&&(t=n.offset().top),$("html, body").animate({scrollTop:t},2e3)}return this}}};var e=$.fn.parseQueryString();$.fn.directory.defaults={queries:e}}));